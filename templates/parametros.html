{% load staticfiles %}
{% load humanize %}
<table class="table table-striped">
  <thead></thead>
  <tbody>
    {% if estacionamiento.capacidad %}
      <tr><td><b><i class="fa fa-car"></i> Puestos:</b></td></tr>
      <tr><td>{{estacionamiento.capacidad}}</td></tr>
      <tr><td><b><i class="fa fa-clock-o"></i> Horario apertura:</b></td></tr>
      <tr><td>{{estacionamiento.apertura}}</td></tr>
      <tr><td><b><i class="fa fa-clock-o"></i> Horario cierre:</b></td></tr>
      <tr><td>{{estacionamiento.cierre}}</td></tr>
    {% endif %}
    {% if estacionamiento.tarifa %}
      <tr><td><b><i class="fa fa-circle"></i> Esquema:</b></td></tr>
      <tr><td>{{estacionamiento.tarifa.tipo}} </td></tr>
    {% endif %}
    {% if estacionamiento.tarifa.tipo == "Tarifa diferenciada para fines de semana" or estacionamiento.tarifa.tipo == "Tarifa diferenciada para fines de semana con feriados" %}
      <tr><td><b><i class="fa fa-money"></i> Tarifa regular:</b></td></tr>
      <tr><td>BsF. {{estacionamiento.tarifa}}</td></tr>
      <tr><td><b><i class="fa fa-money"></i> Tarifa fin de semana:</b></td></tr>
      <tr><td>BsF. {{estacionamiento.tarifa.tarifa2}}</td></tr>
    {% elif estacionamiento.tarifa.tipo == "Tarifa diferenciada por hora pico" %}
      <tr><td><b><i class="fa fa-money"></i> Tarifa regular:</b></td></tr>
      <tr><td>BsF. {{estacionamiento.tarifa}}</td></tr>
      <tr><td><b><i class="fa fa-money"></i> Tarifa especial:</b></td></tr>
      <tr><td>BsF. {{estacionamiento.tarifa.tarifa2}}</td></tr>
      <tr><td><b><i class="fa fa-clock-o"></i> Inicio tarifa especial:</b></td></tr>
      <tr><td>{{estacionamiento.tarifa.inicioEspecial}}</td></tr>
      <tr><td><b><i class="fa fa-clock-o"></i> Fin tarifa especial:</b></td></tr>
      <tr><td>{{estacionamiento.tarifa.finEspecial}}</td></tr>
    {% elif estacionamiento.capacidad %}
      <tr><td><b><i class="fa fa-money"></i> Tarifa:</b></td></tr>
      <tr><td>BsF. {{estacionamiento.tarifa.tarifa|floatformat:2|intcomma}}</td></tr>
    {% endif %}
     <!--Campos del esquema tarifario para dias feriados-->
    {% if estacionamiento.tarifaFeriados %}
	      <tr><td><b><i class="fa fa-circle"></i> Esquema Feriados:</b></td></tr>
	      <tr><td>{{estacionamiento.tarifaFeriados.tipo}} </td></tr>
	    {% if estacionamiento.tarifaFeriados.tipo == "Tarifa diferenciada para fines de semana" or estacionamiento.tarifa.tipo == "Tarifa diferenciada para fines de semana con feriados" %}
	      <tr><td><b><i class="fa fa-money"></i> Tarifa regular:</b></td></tr>
	      <tr><td>BsF. {{estacionamiento.tarifaFeriados|floatformat:2|intcomma}}</td></tr>
	      <tr><td><b><i class="fa fa-money"></i> Tarifa fin de semana:</b></td></tr>
	      <tr><td>BsF. {{estacionamiento.tarifaFeriados.tarifa2|floatformat:2|intcomma}}</td></tr>
	    {% elif estacionamiento.tarifaFeriados.tipo == "Tarifa diferenciada por hora pico" %}
	      <tr><td><b><i class="fa fa-money"></i> Tarifa regular:</b></td></tr>
	      <tr><td>BsF. {{estacionamiento.tarifaFeriados|floatformat:2|intcomma}}</td></tr>
	      <tr><td><b><i class="fa fa-money"></i> Tarifa especial:</b></td></tr>
	      <tr><td>BsF. {{estacionamiento.tarifaFeriados.tarifa2|floatformat:2|intcomma}}</td></tr>
	      <tr><td><b><i class="fa fa-clock-o"></i> Inicio tarifa especial:</b></td></tr>
	      <tr><td>{{estacionamiento.tarifaFeriados.inicioEspecial}}</td></tr>
	      <tr><td><b><i class="fa fa-clock-o"></i> Fin tarifa especial:</b></td></tr>
	      <tr><td>{{estacionamiento.tarifaFeriados.finEspecial}}</td></tr>
	    {% else  %}
	      <tr><td><b><i class="fa fa-money"></i> Tarifa d√≠as feriados:</b></td></tr>
	      <tr><td>BsF. {{estacionamiento.tarifaFeriados|floatformat:2|intcomma}}</td></tr>
	    {% endif %}        
      <tr><td id="opener"><b id="feriados">
        <i class="fa fa-calendar"></i> Dias Feriados</b>
        <span id="dialog" title="Feriados"></span>
      </td></tr>
    {% endif %}
  </tbody>
</table>
<!--Muestra el multidatespicker con los dias feriados marcados-->
{% block scripts %}
  <script type="text/javascript">
  var feria= "{{ estacionamiento.feriados }}";
  $(function() {
    $( "#dialog" ).dialog({
      autoOpen: false,
      resizable: false,
      width : 895,
      position : {at: "center top"},
      open: function(){
      		var y = new Date().getFullYear();
		    var dates=feria.split(",");
				$('#dialog').multiDatesPicker({
					monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],
					dayNamesMin: ['D','L','M','X','J','V','S'],
					dateFormat: "yy-mm-dd", 
					defaultDate: y+'-1-1',
					numberOfMonths: [3,4],
					disabled: true,
					addDates: dates
				});
	  },
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "blind",
        duration: 1000
      }
    });
 
    $( "#opener" ).click(function() {
      $( "#dialog" ).dialog( "open" );
    });
  });
  </script>
{% endblock %}
