{% load staticfiles %}
<meta charset="utf-8">	
<div class="panel panel-default">
  <div class="panel-heading">
    <div class="panel-title">
      <i class="glyphicon glyphicon-wrench pull-right"></i>
      <h4>
        Parametrizar
      </h4>
    </div>
  </div>
  <div class="panel-body">
	  <form action="." method="post" class="form form-vertical">
      {% csrf_token %}     
      {% for field in form %}
        <div class="control-group">
          <div class="controls">
            {{ field }}
            <span class='error' id='{{field.name}}_error' aria-live="polite">
              {{ field.errors }}
            </span>
            <p>
          </div>
        </div>
      {% endfor %}


      {% if estacionamiento.capacidad_M > 0 %}
        <p>Tarifa para motos:</p>
        {% csrf_token %}     
        {% for field in formTarifaM %}
          <div class="control-group">
            <div class="controls">
              {{ field }}
              <span class='error' id='{{field.name}}_error' aria-live="polite">
                {{ field.errors }}
              </span>
              <p>
            </div>
          </div>
        {% endfor %}  
      {% endif %}

      {% if estacionamiento.capacidad_C > 0 %}
        <p>Tarifa para comiones:</p>
        {% csrf_token %}     
        {% for field in formTarifaC %}
          <div class="control-group">
            <div class="controls">
              {{ field }}
              <span class='error' id='{{field.name}}_error' aria-live="polite">
                {{ field.errors }}
              </span>
              <p>
            </div>
          </div>
        {% endfor %}  
      {% endif %}


      {% if estacionamiento.capacidad_D > 0 %}
        <p>Tarifa para discapacitados:</p>
        {% csrf_token %}     
        {% for field in formTarifaD %}
          <div class="control-group">
            <div class="controls">
              {{ field }}
              <span class='error' id='{{field.name}}_error' aria-live="polite">
                {{ field.errors }}
              </span>
              <p>
            </div>
          </div>
        {% endfor %}  
      {% endif %}
    



      <div class="control-group" align ="center">
		<!-- Calendario -->
		<div id="calendar_feriados" style="display: none">
			<i class="fa fa-calendar" id="calendar" onclick="calendar()"></i> &nbsp;
			<span role="text" id="multi_date_picker"></span>
		</div>
		<br>
		<!--Checkbox para tarifa en dias feriados-->
		<input type="checkbox" value="No" id="check_feriados" onchange="formFeriados(this)">&nbsp;Tarifa d√≠as feriados<br>
		<label></label>
      	<div class="controls" align ="center">
        	<button type="submit" class="btn btn-primary" onclick="getDates()" name="botonSubmit">
            Parametrizar Estacionamiento
         	</button>
        </div>
      </div>
    </form>
    <p>
  </div>
</div>

{% include "validator.js.html" %}


{% block scripts %}
<!--OPCION PARA AGREGAR UNA TARIFA PARA DIAS FERIADOS-->
  <script type="text/javascript">
    var show=false;
    var dates=feriados.value.split(",");
    function calendar() {
      show=!show;
    	if (show){
    		   dates=feriados.value.split(",");
				$('#multi_date_picker').show();
				if (dates.length>1) {
					$('#multi_date_picker').multiDatesPicker({
						monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],
						dayNamesMin: ['D','L','M','X','J','V','S'],
						dateFormat: "yy-mm-dd", 
						addDates: dates
					});
				} else $('#multi_date_picker').multiDatesPicker({
						dateFormat: "yy-mm-dd"
					});
			} else {
				$('#multi_date_picker').hide();
			}
		};
    function getDates() {
    		val=$('#multi_date_picker').multiDatesPicker('getDates');
    		if (val!='') feriados.value = val;
		};
    function formFeriados(element) {
      if (element.checked){
        document.getElementById('calendar_feriados').style.display = 'block';
        tarifaFeriados.style.display  = '';
	 	    esquemaFeriados.style.display = '';
      } else {
        document.getElementById('calendar_feriados').style.display = 'none';
        tarifaFeriados.style.display	     = 'none';
	 	    esquemaFeriados.style.display 	   = 'none';
	 	    esquemaFeriados.value		 	         = 'TarifaHora';
	      tarifaFeriados2.style.display 	   = 'none';
	  	  inicioTarifaFeriados.style.display = 'none';
	  	  finTarifaFeriados.style.display    = 'none';
        tarifaFeriados.value 			         = "";
      }
    };
  </script>	
  
{% endblock %}
