{% load staticfiles %}	  
<div class="panel panel-default">
  <div class="panel-heading">
    <div class="panel-title">
      <i class="glyphicon glyphicon-wrench pull-right"></i>
      <h4>
        Parametrizar
      </h4>
    </div>
  </div>
  <div class="panel-body">
    <form action="." method="post" class="form form-vertical">
      {% csrf_token %}
      {% for field in form %}
        <div class="control-group">
          <div class="controls">
            {{ field }}
            <span class='error' id='{{field.name}}_error' aria-live="polite">
              {{ field.errors }}
            </span>
            <p>
          </div>
        </div>
      {% endfor %}
      <div class="control-group" align ="center">
      <!-- Calendario -->
      <div id="calendar_feriados" style="display: none">
        <i class="fa fa-calendar" id="calendar" onclick="calendar()"></i> &nbsp;
        <span role="text" id="multi_date_picker"></span>
      </div>
      <br>
      <!--Checkbox para tarifa en dias feriados-->
      <input type="checkbox" value="No" id="check_feriados" onchange="formFeriados(this)">Tarifa días feriados<br>
        <label></label>
        <div class="controls" align ="center">
          <button type="submit" class="btn btn-primary" onclick="getDates()">
            Parametrizar Estacionamiento
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
{% include "validator.js.html" %}
<script type="text/javascript">
  esquema = document.getElementById('id_esquema');
  tarifa1 = document.getElementById('id_tarifa');
  tarifa2 = document.getElementById('id_tarifa2');
  inicio  = document.getElementById('id_inicioTarifa2');
  fin     = document.getElementById('id_finTarifa2');
  feriados     = document.getElementById('id_feriados');
  tarifaFeriados.style.display = 'none';
  tarifaFeriados.value = ""
  if (esquema.value == "TarifaHoraPico") {
    tarifa1.placeholder="Tarifa normal";
    inicio.style.display='';
    inicio.placeholder = "Inicio horario pico"
    fin.style.display='';
    fin.placeholder = "Fin horario pico"
    tarifa2.style.display = '';
    tarifa2.placeholder="Tarifa pico";
  } else if (esquema.value == "TarifaFinDeSemana") {
    inicio.style.display='none';
    inicio.value = ""
    fin.style.display='none';
    fin.value = ""
    tarifa1.placeholder="Tarifa normal";
    tarifa2.style.display = '';
    tarifa2.placeholder="Tarifa fin de semana";
  } else {
    tarifa1.placeholder="Tarifa";
    inicio.style.display='none';
    inicio.value = ""
    fin.style.display='none';
    fin.value = ""
    tarifa2.style.display='none';
    tarifa2.value = ""
  }
  if (esquema) {
    esquema.onchange=function() {
      if (this.value == "TarifaHoraPico") {
        tarifa1.placeholder="Tarifa normal";
        inicio.style.display='';
        inicio.placeholder = "Inicio horario pico"
        fin.style.display='';
        fin.placeholder = "Fin horario pico"
        tarifa2.style.display = '';
        tarifa2.placeholder="Tarifa pico";
      } else if (this.value == "TarifaFinDeSemana") {
        inicio.style.display='none';
        inicio.value = ""
        fin.style.display='none';
        fin.value = ""
        tarifa1.placeholder="Tarifa normal";
        tarifa2.style.display = '';
        tarifa2.placeholder="Tarifa fin de semana";
      } else {
        tarifa1.placeholder="Tarifa";
        inicio.style.display='none';
        inicio.value = ""
        fin.style.display='none';
        fin.value = ""
        tarifa2.style.display='none';
        tarifa2.value = ""
      }
    }
  }
</script>

<!--OPCION PARA AGREGAR UNA TARIFA PARA DIAS FERIADOS-->
{% block scripts %}
	<script type="text/javascript">
    var show=false;
    var dates;
    function calendar() {
      show=!show;
    	if (show){
    		   dates=feriados.value.split(",");
				$('#multi_date_picker').show();
				if (dates.length>1) {
					$('#multi_date_picker').multiDatesPicker({
						dateFormat: "yy-mm-dd", 
						addDates: dates
					});
				} else $('#multi_date_picker').multiDatesPicker({
						dateFormat: "yy-mm-dd"
					});
			} else {
				$('#multi_date_picker').hide();
			}
		};
    function getDates() {
    		val=$('#multi_date_picker').multiDatesPicker('getDates');
    		feriados.value = val;
		};
    var agregar=false;
    function formFeriados(element) {
      if (element.checked){
        document.getElementById('calendar_feriados').style.display = 'block';
        tarifaFeriados.style.display = '';
        tarifaFeriados.placeholder="Tarifa días feriados";
      } else {
        document.getElementById('calendar_feriados').style.display = 'none';
        tarifaFeriados.style.display = 'none';
        tarifaFeriados.value = ""
      }
    };
  </script>	
{% endblock %}